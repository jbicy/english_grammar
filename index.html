<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高中英文特訓班：Grammar Elite (修正版)</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --primary: #38bdf8;
            --accent: #818cf8;
            --success: #10b981;
            --error: #f43f5e;
            --text-main: #f1f5f9;
            --text-sub: #94a3b8;
            --border: #334155;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        h1 {
            font-size: 2rem;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .subtitle {
            color: var(--text-sub);
            font-size: 1rem;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .topic-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .topic-num {
            font-size: 0.9rem;
            color: var(--primary);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .topic-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        .topic-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 12px;
        }
        
        .tag {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 4px;
            background: rgba(255,255,255,0.05);
            color: var(--text-sub);
        }

        #game-interface {
            display: none;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border);
            overflow: hidden;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .game-bar {
            background: rgba(0,0,0,0.2);
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }

        .btn-text {
            background: none;
            border: none;
            color: var(--text-sub);
            cursor: pointer;
            font-size: 0.95rem;
            padding: 5px 10px;
        }
        .btn-text:hover { color: var(--text-main); }

        .concept-box {
            background: rgba(56, 189, 248, 0.05);
            padding: 25px;
            border-left: 4px solid var(--primary);
        }
        .concept-title {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        .concept-content {
            color: var(--text-main);
            font-size: 0.95rem;
        }

        .quiz-area { padding: 30px; }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--border);
            margin-bottom: 25px;
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s;
        }

        .question {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 30px;
            min-height: 80px;
            display: flex;
            align-items: center;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        @media (min-width: 600px) { .options { grid-template-columns: 1fr 1fr; } }

        .opt-btn {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 18px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
        }
        .opt-btn:hover:not(:disabled) {
            background: rgba(255,255,255,0.08);
            border-color: var(--text-sub);
        }
        .opt-btn.correct { background: rgba(16, 185, 129, 0.2); border-color: var(--success); }
        .opt-btn.wrong { background: rgba(244, 63, 94, 0.2); border-color: var(--error); }

        .explanation {
            margin-top: 25px;
            padding: 20px;
            border-radius: 8px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border);
            display: none;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .next-btn {
            display: none;
            margin-top: 20px;
            background: var(--primary);
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            float: right;
        }
        .next-btn:hover { background: #7dd3fc; }

        #result-view {
            display: none;
            text-align: center;
            padding: 60px 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 4px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            margin: 0 auto 30px;
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
        }
        .action-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <header id="main-header">
        <h1>高中英文特訓班 Grammar Elite</h1>
        <div class="subtitle">針對分類架構設計 • 隨機抽題 (10題/回合)</div>
    </header>

    <div id="menu-view" class="menu-grid"></div>

    <div id="game-interface">
        <div class="game-bar">
            <button class="btn-text" onclick="showMenu()">❮ EXIT</button>
            <span style="color:var(--text-sub); font-size:0.9rem;" id="level-indicator">UNIT 01</span>
        </div>
        
        <div class="concept-box" id="concept-area"></div>

        <div class="quiz-area">
            <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
            <div class="question" id="question-text"></div>
            <div class="options" id="options-area"></div>
            
            <div class="explanation" id="explanation-area"></div>
            <button class="next-btn" id="next-btn" onclick="nextQuestion()">NEXT QUESTION ➔</button>
            <div style="clear:both;"></div>
        </div>
    </div>

    <div id="result-view">
        <h2 style="color:var(--text-sub)">UNIT COMPLETE</h2>
        <div class="score-circle" id="final-score">100</div>
        <p id="result-msg">Excellent job!</p>
        <button class="action-btn" onclick="showMenu()">Return to Dashboard</button>
    </div>
</div>

<script>
/*
  Data Structure - Checked for Accuracy
  Logic: Randomly selects 10 questions from the pool.
*/
const syllabus = [
    {
        id: 1,
        title: "句子結構 Sentence Structure",
        tags: ["Patterns", "Clauses", "Conjunctions"],
        concept: "<strong>五大句型</strong> (S+V...OC)、<strong>三大子句</strong> (名詞/形容詞/副詞)、基礎連接詞 (and/but/because)。",
        questions: [
            { q: "We found the movie ___.", options: ["boring", "bored", "boringly", "to bore"], ans: 0, explain: "S+V+O+C 句型。受詞 movie 是事物，補語用 V-ing 表主動/令人感到...。" },
            { q: "He gave me a book. This is S + V + ___.", options: ["IO + DO", "DO + IO", "O + C", "O"], ans: 0, explain: "Give 是授與動詞，me 是間接受詞 (IO)，a book 是直接受詞 (DO)。" },
            { q: "The birds flew away. This is ___.", options: ["S + V", "S + V + O", "S + V + C", "S + V + O + O"], ans: 0, explain: "Fly (flew) 是不及物動詞，away 是地方副詞，不影響基本句型，故為 S + V。" },
            { q: "She looks happy. This is ___.", options: ["S + V + C", "S + V + O", "S + V", "S + V + O + C"], ans: 0, explain: "Look 是連綴動詞，happy 是主詞補語 (SC) 形容主詞狀態。" },
            { q: "I don't know ___ he will come.", options: ["whether", "that", "what", "which"], ans: 0, explain: "名詞子句當 know 的受詞，表示「是否」用 whether 或 if。" },
            { q: "The man ___ is talking to Tom is my dad.", options: ["who", "which", "whom", "whose"], ans: 0, explain: "形容詞子句修飾人 (The man) 且在子句中當主詞，故用 who。" },
            { q: "I will call you ___ I arrive.", options: ["when", "so", "but", "where"], ans: 0, explain: "副詞子句連接詞，表示時間點用 when (當...時)。" },
            { q: "He is rich, ___ he is unhappy.", options: ["but", "and", "so", "or"], ans: 0, explain: "前後語意相反 (富有但這不快樂)，用轉折連接詞 but。" },
            { q: "I stayed home ___ it was raining.", options: ["because", "so", "but", "although"], ans: 0, explain: "表示原因，後接完整子句，用 because。" },
            { q: "That is the house ___ I live.", options: ["where", "which", "that", "what"], ans: 0, explain: "形容詞子句修飾地點 house，且子句完整 (I live there)，用關係副詞 where (= in which)。" },
            { q: "What he said ___ true.", options: ["is", "are", "be", "were"], ans: 0, explain: "名詞子句 (What he said) 當主詞視為單數，動詞用 is。" },
            { q: "Please keep the room ___.", options: ["clean", "cleanly", "cleaning", "to clean"], ans: 0, explain: "Keep + O + Adj (保持...狀態)，clean 在此為形容詞。" },
            { q: "He made me ___ the floor.", options: ["clean", "to clean", "cleaning", "cleaned"], ans: 0, explain: "使役動詞 make + O + VR (原形動詞)。" },
            { q: "___ he is smart is known to all.", options: ["That", "What", "Which", "If"], ans: 0, explain: "名詞子句當主詞，表示確定的事實，句首必須用 That。" },
            { q: "I have a dog ___ tail is short.", options: ["whose", "who", "which", "that"], ans: 0, explain: "表示所有格關係 (牠的尾巴)，用 whose。" }
        ]
    },
    {
        id: 2,
        title: "時態 Tenses",
        tags: ["Present", "Past", "Future", "Perfect"],
        concept: "<strong>國中基礎</strong> (簡單/進行/現在完成) + <strong>高中進階</strong> (過去完成、未來完成、完成進行)。",
        questions: [
            { q: "Listen! The baby ___.", options: ["is crying", "cries", "cried", "has cried"], ans: 0, explain: "Listen! (聽!) 暗示動作現在正在進行，用現在進行式。" },
            { q: "I ___ to Japan three times.", options: ["have been", "went", "go", "am going"], ans: 0, explain: "表示截至目前為止的經驗，用現在完成式 (have been to)。" },
            { q: "He ___ TV when I called him.", options: ["was watching", "is watching", "watched", "has watched"], ans: 0, explain: "過去某特定時間點 (when I called him) 正在進行的動作，用過去進行式。" },
            { q: "By next year, I ___ here for 10 years.", options: ["will have lived", "have lived", "will live", "had lived"], ans: 0, explain: "By + 未來時間，且有持續時間 (for 10 years)，用未來完成式 will have p.p.。" },
            { q: "The train ___ before I arrived.", options: ["had left", "has left", "left", "was leaving"], ans: 0, explain: "過去某動作 (arrived) 之前已發生，用過去完成式 had p.p.。" },
            { q: "I ___ English for two hours. (Still doing it)", options: ["have been studying", "studied", "am studying", "had studied"], ans: 0, explain: "從過去持續到現在且還在進行，用現在完成進行式 (have been V-ing)。" },
            { q: "We ___ visit our grandma tomorrow.", options: ["are going to", "have", "did", "had"], ans: 0, explain: "未來計畫可用 be going to。" },
            { q: "The sun ___ in the east.", options: ["rises", "rose", "is rising", "has risen"], ans: 0, explain: "自然法則/真理用現在簡單式。" },
            { q: "Before he came to Taipei, he ___ in Kaohsiung.", options: ["had lived", "lived", "has lived", "lives"], ans: 0, explain: "過去 (came) 之前發生的動作，用過去完成式。" },
            { q: "She ___ tired because she had been working all day.", options: ["was", "is", "has been", "will be"], ans: 0, explain: "因為過去完成進行式的動作導致了「當時」的狀態，故用過去式 was。" },
            { q: "Look at the dark clouds. It ___ rain.", options: ["is going to", "will", "is", "has"], ans: 0, explain: "根據眼前跡象推測即將發生，用 be going to。" },
            { q: "He said he ___ finish the work by 5 PM.", options: ["would", "will", "can", "may"], ans: 0, explain: "過去式子句中的未來 (過去未來式)，will 轉 would。" },
            { q: "If it ___ tomorrow, we will stay home.", options: ["rains", "will rain", "rained", "rain"], ans: 0, explain: "條件子句用現在式代替未來式。" },
            { q: "I ___ him since 2010.", options: ["have known", "knew", "know", "had known"], ans: 0, explain: "Since + 過去時間點，搭配現在完成式。" },
            { q: "By the time you get back, I ___ cleaning.", options: ["will have finished", "finish", "finished", "have finished"], ans: 0, explain: "By + 未來時間子句，主句用未來完成式。" }
        ]
    },
    {
        id: 3,
        title: "助動詞 Modals",
        tags: ["Basic Modals", "Past Modals"],
        concept: "<strong>國中</strong> (can/may/must/should) + <strong>高中推測語氣</strong> (must have p.p. / should have p.p.)。",
        questions: [
            { q: "You ___ follow the rules.", options: ["must", "can", "may", "might"], ans: 0, explain: "表示義務/必須 (must)。" },
            { q: "___ I borrow your pen?", options: ["May", "Must", "Should", "Will"], ans: 0, explain: "請求許可 (May I...?)。" },
            { q: "He ___ swim when he was five.", options: ["could", "can", "may", "must"], ans: 0, explain: "過去的能力 (could)。" },
            { q: "The ground is wet. It ___ rained last night.", options: ["must have", "should have", "can have", "will have"], ans: 0, explain: "對過去的肯定推測「一定已經...」，用 must have p.p.。" },
            { q: "You ___ studied harder. (But you didn't)", options: ["should have", "must have", "may have", "can have"], ans: 0, explain: "「本來應該...卻沒做」，表惋惜/責備，用 should have p.p.。" },
            { q: "He ___ be at home; I saw him out just now.", options: ["can't", "mustn't", "shouldn't", "won't"], ans: 0, explain: "對現在事實的否定推測「不可能...」，用 can't。" },
            { q: "She ___ passed the exam, but she didn't try.", options: ["could have", "should have", "must have", "will have"], ans: 0, explain: "「本來可以...但沒做」，用 could have p.p.。" },
            { q: "You ___ smoke here. It's forbidden.", options: ["mustn't", "don't have to", "needn't", "won't"], ans: 0, explain: "表示禁止 (mustn't)。" },
            { q: "You ___ bring food. We have plenty.", options: ["needn't", "mustn't", "can't", "shouldn't"], ans: 0, explain: "表示不需 (needn't / don't have to)。" },
            { q: "I ___ rather stay home than go out.", options: ["would", "should", "could", "might"], ans: 0, explain: "Would rather (寧願)。" },
            { q: "He ___ know the answer, but I'm not sure.", options: ["might", "must", "should", "will"], ans: 0, explain: "不確定推測 (可能)，用 might。" },
            { q: "Why did you do that? You ___ told me first.", options: ["should have", "must have", "could have", "may have"], ans: 0, explain: "本該告訴我 (should have told)。" },
            { q: "We ___ leave now, or we'll be late.", options: ["had better", "would rather", "may as well", "used to"], ans: 0, explain: "Had better (最好...否則...)。" },
            { q: "John hasn't arrived. He ___ missed the bus.", options: ["may have", "should have", "can have", "ought to"], ans: 0, explain: "對過去的推測 (可能已經)，用 may/might have p.p.。" },
            { q: "You ___ speak loudly in the library.", options: ["shouldn't", "needn't", "don't have to", "won't"], ans: 0, explain: "勸告不應該 (shouldn't)。" }
        ]
    },
    {
        id: 4,
        title: "被動語態 Passive Voice",
        tags: ["Passive Forms", "By Phrase"],
        concept: "<strong>be + p.p.</strong>。國中基礎變換 + 高中進階 (完成進行被動、含 by 省略)。",
        questions: [
            { q: "The letter ___ by Tom yesterday.", options: ["was written", "wrote", "is written", "writes"], ans: 0, explain: "過去簡單式被動 (was/were p.p.)。" },
            { q: "The house is ___ built now.", options: ["being", "been", "be", "to be"], ans: 0, explain: "進行式被動 (is/am/are + being + p.p.)。" },
            { q: "The work has ___ done.", options: ["been", "being", "be", "to be"], ans: 0, explain: "完成式被動 (has/have + been + p.p.)。" },
            { q: "English ___ spoken in many countries.", options: ["is", "was", "has", "had"], ans: 0, explain: "現在簡單式被動 (is/am/are + p.p.)。" },
            { q: "The thief was caught ___ the police.", options: ["by", "with", "from", "at"], ans: 0, explain: "動作執行者用 by。" },
            { q: "It will ___ finished tomorrow.", options: ["be", "been", "being", "have"], ans: 0, explain: "未來式被動 (will be p.p.)。" },
            { q: "He was seen ___ the room.", options: ["to enter", "enter", "entered", "enters"], ans: 0, explain: "感官動詞主動變被動時，原形動詞需改為不定詞 (to V)。" },
            { q: "The car needs ___.", options: ["fixing", "to fix", "fixed", "fix"], ans: 0, explain: "Need + V-ing 表主動形式被動意義 (需要被修理)。" },
            { q: "This problem can ___ solved.", options: ["be", "been", "being", "to be"], ans: 0, explain: "助動詞被動 (can be p.p.)。" },
            { q: "The project had ___ completed before I arrived.", options: ["been", "being", "be", "to be"], ans: 0, explain: "過去完成式被動 (had been p.p.)。" },
            { q: "He is known ___ a writer.", options: ["as", "for", "to", "by"], ans: 0, explain: "Be known as (以...身分聞名)。" },
            { q: "I was surprised ___ the news.", options: ["at", "by", "with", "for"], ans: 0, explain: "Surprised at (對...感到驚訝)，不用 by。" },
            { q: "The book is worth ___.", options: ["reading", "to read", "read", "being read"], ans: 0, explain: "Be worth + V-ing (值得.../主動表被動意)。" },
            { q: "Who was this cake made ___?", options: ["by", "from", "with", "of"], ans: 0, explain: "被動疑問句，介係詞 by 置句尾。" },
            { q: "Nothing has ___ heard from him.", options: ["been", "being", "be", "to be"], ans: 0, explain: "完成式被動 (has been p.p.)。" }
        ]
    },
    {
        id: 5,
        title: "名詞與代名詞 Nouns & Pronouns",
        tags: ["Plurals", "Indefinite Pronouns", "Relative Pronouns"],
        concept: "單複數、不定代名詞 (everyone/both/neither)、<strong>高中關係代名詞</strong> (who/which/whose)。",
        questions: [
            { q: "One child, two ___.", options: ["children", "childs", "child", "childrens"], ans: 0, explain: "Child 的複數是不規則變化 children。" },
            { q: "___ of the two boys is tall.", options: ["Neither", "None", "All", "Every"], ans: 0, explain: "兩者都不 (Neither)。None 用於三者以上。" },
            { q: "I have two pens. One is red, ___ is blue.", options: ["the other", "another", "other", "others"], ans: 0, explain: "兩者範圍明確，一個...另一個用 one... the other。" },
            { q: "The boy ___ is running is Tom.", options: ["who", "which", "whose", "whom"], ans: 0, explain: "先行詞是人，且在子句中當主詞，用 who。" },
            { q: "The book ___ I bought is interesting.", options: ["which", "who", "whose", "whom"], ans: 0, explain: "先行詞是物，用 which (或 that)。" },
            { q: "I met a girl ___ name is Mary.", options: ["whose", "who", "which", "that"], ans: 0, explain: "表示「她的」名字，用所有格關代 whose。" },
            { q: "___ needs love.", options: ["Everyone", "All", "Both", "Many"], ans: 0, explain: "Everyone 視為單數。" },
            { q: "There is ___ wrong with the car.", options: ["something", "anything", "everything", "nothing"], ans: 0, explain: "肯定句通常用 something。" },
            { q: "This is the man ___ I talked to.", options: ["whom", "whose", "which", "what"], ans: 0, explain: "先行詞是人，且在子句中當介係詞 to 的受詞，用 whom (或 who)。" },
            { q: "___ of the students has a book.", options: ["Each", "All", "Both", "Some"], ans: 0, explain: "Each (每一個) 接單數動詞 has。" },
            { q: "He drank ___ water.", options: ["a little", "a few", "many", "few"], ans: 0, explain: "Water 不可數，用 a little (一點點)。" },
            { q: "This is the very book ___ I want.", options: ["that", "which", "who", "what"], ans: 0, explain: "先行詞有 the very 強調時，關代只能用 that。" },
            { q: "Those ___ work hard will succeed.", options: ["who", "which", "whom", "whose"], ans: 0, explain: "Those who (凡是...的人)。" },
            { q: "I don't like this one. Show me ___.", options: ["another", "other", "the other", "others"], ans: 0, explain: "不定範圍中的另一個用 another。" },
            { q: "___ of them are happy.", options: ["Both", "Neither", "Each", "One"], ans: 0, explain: "Both (兩者都) 接複數動詞 are。" }
        ]
    },
    {
        id: 6,
        title: "形容詞與副詞 Adj & Adv",
        tags: ["Comparison", "Frequency", "Transitions"],
        concept: "比較級/最高級、頻率副詞、<strong>高中延伸</strong> (倍數 twice as... / 連接副詞 however)。",
        questions: [
            { q: "She is ___ than me.", options: ["taller", "tall", "tallest", "more tall"], ans: 0, explain: "單音節比較級通常加 -er (taller)。" },
            { q: "He is the ___ student in class.", options: ["best", "good", "better", "well"], ans: 0, explain: "最高級 the best。" },
            { q: "This car is ___ expensive than that one.", options: ["more", "much", "very", "as"], ans: 0, explain: "多音節比較級前加 more。" },
            { q: "He is ___ busy to go.", options: ["too", "so", "very", "such"], ans: 0, explain: "Too...to... (太...而不能)。" },
            { q: "This room is twice as ___ as that one.", options: ["big", "bigger", "biggest", "more big"], ans: 0, explain: "倍數用法：倍數 + as + 原級 adj + as。" },
            { q: "He is rich; ___, he is unhappy.", options: ["however", "therefore", "moreover", "otherwise"], ans: 0, explain: "連接副詞表轉折 (然而)。" },
            { q: "He studied hard; ___, he passed.", options: ["therefore", "however", "nevertheless", "otherwise"], ans: 0, explain: "表因果 (因此)。" },
            { q: "I ___ go to the gym. (Frequency)", options: ["often", "ever", "yet", "already"], ans: 0, explain: "Often (經常) 為頻率副詞。" },
            { q: "The ___ you eat, the fatter you get.", options: ["more", "most", "many", "much"], ans: 0, explain: "The more... the more... (越...越...)。" },
            { q: "He runs as ___ as a horse.", options: ["fast", "faster", "fastest", "fastly"], ans: 0, explain: "As...as 中間接原級。Fast 既是形容詞也是副詞。" },
            { q: "She is one of the ___ girls.", options: ["prettiest", "prettier", "pretty", "most pretty"], ans: 0, explain: "One of the + 最高級 + 複數名詞。" },
            { q: "He is senior ___ me.", options: ["to", "than", "for", "with"], ans: 0, explain: "Senior to (比...年長/資深)。" },
            { q: "It is ___ cold today.", options: ["very", "much", "more", "many"], ans: 0, explain: "修飾形容詞原級用 very。" },
            { q: "He is much ___ than I thought.", options: ["smarter", "smart", "smartest", "more smart"], ans: 0, explain: "Much 可用來修飾比較級。" },
            { q: "Of the two, he is the ___.", options: ["taller", "tallest", "tall", "most tall"], ans: 0, explain: "兩者間比較，有限定範圍 (Of the two) 時，用 the + 比較級。" }
        ]
    },
    {
        id: 7,
        title: "動詞 Verb Forms",
        tags: ["Gerunds", "Infinitives", "Causative"],
        concept: "三態、V-ing vs to V、<strong>使役動詞</strong> (make/let) 與 <strong>感官動詞</strong> (see/hear)。",
        questions: [
            { q: "I enjoy ___ movies.", options: ["watching", "to watch", "watch", "watched"], ans: 0, explain: "Enjoy 後接動名詞 (V-ing)。" },
            { q: "He wants ___ home.", options: ["to go", "going", "go", "went"], ans: 0, explain: "Want 後接不定詞 (to V)。" },
            { q: "He made me ___ the car.", options: ["wash", "to wash", "washing", "washed"], ans: 0, explain: "Make (使役動詞) + O + VR (原形)。" },
            { q: "I saw him ___ the street.", options: ["cross", "to cross", "crossed", "crosses"], ans: 0, explain: "See (感官動詞) + O + VR (全程) 或 V-ing (正在)。此處 cross 正確。" },
            { q: "Let him ___.", options: ["go", "to go", "going", "gone"], ans: 0, explain: "Let + O + VR。" },
            { q: "I had my hair ___.", options: ["cut", "cutting", "to cut", "cuts"], ans: 0, explain: "Have + O + p.p. (表示讓某物被做)，hair 是被剪。" },
            { q: "Stop ___ (quit smoking).", options: ["smoking", "to smoke", "smoke", "smoked"], ans: 0, explain: "Stop V-ing (停止做某事)。" },
            { q: "He stopped ___ (to take a break).", options: ["to rest", "resting", "rest", "rested"], ans: 0, explain: "Stop to V (停下來為了去做另一件事)。" },
            { q: "___ is good exercise.", options: ["Swimming", "Swim", "Swam", "To swim"], ans: 0, explain: "動名詞 (V-ing) 當主詞。" },
            { q: "He went to the store ___ milk.", options: ["to buy", "buying", "buy", "bought"], ans: 0, explain: "不定詞表目的 (in order to)。" },
            { q: "I heard her ___.", options: ["singing", "to sing", "sang", "sung"], ans: 0, explain: "Hear + O + V-ing (聽到正在做)。" },
            { q: "Please help me ___ the box.", options: ["move", "moving", "moved", "moves"], ans: 0, explain: "Help + (to) + V。" },
            { q: "It is important ___ English.", options: ["to learn", "learning", "learn", "learned"], ans: 0, explain: "虛主詞 It... to V 句型。" },
            { q: "I got him ___ the work.", options: ["to do", "do", "doing", "done"], ans: 0, explain: "Get + 人 + to V (叫某人做)。" },
            { q: "Would you mind ___ the door?", options: ["opening", "to open", "open", "opened"], ans: 0, explain: "Mind (介意) 後接 V-ing。" }
        ]
    },
    {
        id: 8,
        title: "介係詞 Prepositions",
        tags: ["Time/Place", "Phrasal Preps"],
        concept: "基礎 (in/on/at) + <strong>高中複合介係詞</strong> (according to / because of / instead of)。",
        questions: [
            { q: "He was born ___ 1990.", options: ["in", "on", "at", "of"], ans: 0, explain: "年份、月份、季節前用 in。" },
            { q: "The meeting is ___ Monday.", options: ["on", "in", "at", "by"], ans: 0, explain: "特定日期、星期前用 on。" },
            { q: "See you ___ 5 PM.", options: ["at", "on", "in", "to"], ans: 0, explain: "具體時刻前用 at。" },
            { q: "___ the rain, we stayed home.", options: ["Because of", "Because", "Due", "Since"], ans: 0, explain: "接名詞片語 (the rain) 用 Because of。" },
            { q: "___ Tom, the movie is good.", options: ["According to", "According", "Based", "As"], ans: 0, explain: "According to (根據)。" },
            { q: "I want tea ___ coffee.", options: ["instead of", "instead", "replace", "with"], ans: 0, explain: "Instead of (代替)。" },
            { q: "He is good ___ math.", options: ["at", "in", "on", "with"], ans: 0, explain: "Good at (擅長)。" },
            { q: "Look ___ the picture.", options: ["at", "on", "in", "to"], ans: 0, explain: "Look at (看著)。" },
            { q: "Wait ___ me.", options: ["for", "to", "at", "on"], ans: 0, explain: "Wait for (等待)。" },
            { q: "He walks ___ school.", options: ["to", "at", "on", "in"], ans: 0, explain: "Walk to (走到...去)。" },
            { q: "The book is ___ the table.", options: ["on", "in", "at", "to"], ans: 0, explain: "在...表面上用 on。" },
            { q: "In spite ___ the rain, we went out.", options: ["of", "off", "on", "for"], ans: 0, explain: "In spite of (儘管)。" },
            { q: "We talked ___ the problem.", options: ["about", "with", "to", "at"], ans: 0, explain: "Talk about (談論)。" },
            { q: "He is interested ___ music.", options: ["in", "on", "at", "with"], ans: 0, explain: "Interested in (對...感興趣)。" },
            { q: "Different ___ mine.", options: ["from", "to", "with", "than"], ans: 0, explain: "Different from (與...不同)。" }
        ]
    },
    {
        id: 9,
        title: "連接詞 Conjunctions",
        tags: ["Coordinating", "Subordinating"],
        concept: "國中 (and/but/so/if) + <strong>高中進階</strong> (although/unless/provided that/as soon as)。",
        questions: [
            { q: "___ it rained, we went out.", options: ["Although", "Because", "If", "So"], ans: 0, explain: "雖...但是... (Although)。" },
            { q: "You will fail ___ you study.", options: ["unless", "if", "because", "so"], ans: 0, explain: "Unless (除非 = If not)。" },
            { q: "I will go ___ you go.", options: ["provided that", "unless", "but", "so"], ans: 0, explain: "Provided that (假如/只要)。" },
            { q: "___ he arrived, the party started.", options: ["As soon as", "Unless", "Although", "But"], ans: 0, explain: "As soon as (一...就...)。" },
            { q: "He is rich ___ unhappy.", options: ["but", "and", "so", "or"], ans: 0, explain: "轉折 (但是) 用 but。" },
            { q: "___ he was sick, he stayed home.", options: ["Because", "Although", "But", "So"], ans: 0, explain: "原因用 Because。" },
            { q: "___ you like it or not, we must go.", options: ["Whether", "If", "What", "Which"], ans: 0, explain: "Whether...or not (無論是否)。" },
            { q: "Even ___ it rains, I will go.", options: ["if", "so", "but", "what"], ans: 0, explain: "Even if (即使)。" },
            { q: "Wait ___ he comes.", options: ["until", "unless", "if", "but"], ans: 0, explain: "Until (直到)。" },
            { q: "Study hard, ___ you will fail.", options: ["or", "and", "so", "but"], ans: 0, explain: "祈使句 + or (否則)。" },
            { q: "Not only you ___ I am wrong.", options: ["but also", "and", "or", "so"], ans: 0, explain: "Not only... but also..." },
            { q: "Either you ___ he has to go.", options: ["or", "nor", "and", "but"], ans: 0, explain: "Either...or... (不是...就是...)。" },
            { q: "Neither Tom ___ Mary is here.", options: ["nor", "or", "and", "but"], ans: 0, explain: "Neither...nor... (既不...也不...)。" },
            { q: "___ he is young, he is wise.", options: ["While", "Since", "Because", "If"], ans: 0, explain: "While 放句首可表「雖然」。" },
            { q: "He ran fast ___ he could catch the bus.", options: ["so that", "because", "although", "unless"], ans: 0, explain: "So that (以便/為了)。" }
        ]
    },
    {
        id: 10,
        title: "子句 Clauses",
        tags: ["Noun/Adj Clauses", "Inversion"],
        concept: "名詞/形容詞子句、<strong>限定vs非限定</strong> (逗號)、<strong>倒裝句</strong> (Only then...)。",
        questions: [
            { q: "I know ___ he lives.", options: ["where", "what", "which", "who"], ans: 0, explain: "名詞子句 (where he lives) 當受詞。" },
            { q: "The man, ___ is my dad, is tall.", options: ["who", "that", "which", "whom"], ans: 0, explain: "非限定用法 (有逗號)，人為主詞用 who，不可用 that。" },
            { q: "Only then ___ I realize my mistake.", options: ["did", "do", "have", "had"], ans: 0, explain: "Only + 時間副詞放句首，須倒裝 (助動詞提前)。" },
            { q: "Never ___ I seen such a thing.", options: ["have", "did", "do", "had"], ans: 0, explain: "否定副詞 Never 放句首，完成式倒裝，助動詞用 have。" },
            { q: "I don't know ___ to do.", options: ["what", "how", "which", "where"], ans: 0, explain: "What to do (做什麼)，疑問詞+不定詞。" },
            { q: "The reason ___ he left is unknown.", options: ["why", "which", "what", "who"], ans: 0, explain: "The reason why... (關係副詞)。" },
            { q: "My mom, ___ loves me, is kind.", options: ["who", "that", "which", "whom"], ans: 0, explain: "非限定用法，先行詞是人，用 who。" },
            { q: "Little ___ he know about it.", options: ["did", "do", "does", "has"], ans: 0, explain: "Little (幾乎不) 放句首倒裝，一般動詞 know 需搭配助動詞 did。" },
            { q: "Here ___ the bus.", options: ["comes", "come", "is coming", "coming"], ans: 0, explain: "Here/There 地方副詞放句首，完全倒裝 (V + S)。" },
            { q: "Not until yesterday ___ he call me.", options: ["did", "do", "does", "had"], ans: 0, explain: "Not until... 倒裝 (助動詞 + S + V)。" },
            { q: "___ he is rich is true.", options: ["That", "What", "Which", "If"], ans: 0, explain: "名詞子句當主詞，且句意確定，用 That。" },
            { q: "He is the man ___ car was stolen.", options: ["whose", "who", "which", "that"], ans: 0, explain: "所有格 whose。" },
            { q: "So happy ___.", options: ["was I", "I was", "did I", "I did"], ans: 0, explain: "So + Adj 放句首倒裝 (Be + S)。" },
            { q: "Were I you, I ___ go.", options: ["would", "will", "can", "may"], ans: 0, explain: "與現在事實相反的假設語氣倒裝 (省略 If)。" },
            { q: "Under no circumstances ___ you open the door.", options: ["should", "you should", "you can", "you will"], ans: 0, explain: "否定片語放句首倒裝。" }
        ]
    },
    {
        id: 11,
        title: "分詞構句 Participles",
        tags: ["Reduced Clauses"],
        concept: "<strong>V-ing</strong> (主動/正在) vs <strong>p.p.</strong> (被動/完成)、關代省略應用。",
        questions: [
            { q: "___ the room, I saw him.", options: ["Entering", "Entered", "Enter", "To enter"], ans: 0, explain: "主動進入 (When I entered -> Entering)。" },
            { q: "___ by the dog, he cried.", options: ["Bitten", "Biting", "Bit", "To bite"], ans: 0, explain: "被咬 (Because he was bitten -> Bitten)。" },
            { q: "___ from the hill, the city looks small.", options: ["Seen", "Seeing", "To see", "See"], ans: 0, explain: "被看 (When it is seen -> Seen)。" },
            { q: "The girl ___ there is Mary.", options: ["standing", "stands", "stood", "is standing"], ans: 0, explain: "形容詞子句省略 (who is standing -> standing)。" },
            { q: "___ the work, he went home.", options: ["Having finished", "Finished", "Finishing", "To finish"], ans: 0, explain: "完成分詞 (先做完) Having p.p.。" },
            { q: "He sat there, ___ a book.", options: ["reading", "read", "to read", "reads"], ans: 0, explain: "附帶動作 V-ing (一邊...一邊...)。" },
            { q: "Weather ___, we will go.", options: ["permitting", "permits", "permitted", "permit"], ans: 0, explain: "獨立分詞構句 (Weather permitting)，兩句主詞不同。" },
            { q: "Generally ___, it is hot.", options: ["speaking", "spoken", "speak", "to speak"], ans: 0, explain: "Generally speaking (一般來說)。" },
            { q: "The letter, ___ in English, was hard to read.", options: ["written", "writing", "wrote", "write"], ans: 0, explain: "被寫 (which was written -> written)。" },
            { q: "Not ___ what to do, he cried.", options: ["knowing", "known", "knew", "know"], ans: 0, explain: "否定分詞構句，Not 置於 V-ing 前。" },
            { q: "Judging ___ his face, he is sad.", options: ["from", "by", "at", "in"], ans: 0, explain: "Judging from (從...判斷)。" },
            { q: "___ tired, he went to bed.", options: ["Being", "Been", "To be", "Is"], ans: 0, explain: "Because he was tired -> Being tired (Being 通常可省略，但在選項中選最合適的)。" },
            { q: "Compared ___ him, I am tall.", options: ["with", "to", "at", "on"], ans: 0, explain: "Compared with (被和...相比)。" },
            { q: "There was a car ___ outside.", options: ["waiting", "waited", "wait", "to wait"], ans: 0, explain: "車子主動在等待。" },
            { q: "The broken glass ___ on the floor.", options: ["lay", "laid", "lied", "laying"], ans: 0, explain: "Lie (位於) 的過去式是 lay。" }
        ]
    },
    {
        id: 12,
        title: "直接/間接引語 Reported Speech",
        tags: ["Tense Shift", "Reporting Verbs"],
        concept: "基本變化 (時態後退) + <strong>高中延伸</strong> (ask/tell/order/wonder 用法)。",
        questions: [
            { q: "He said, 'I am busy.' -> He said he ___ busy.", options: ["was", "is", "will be", "has been"], ans: 0, explain: "時態後退 (am -> was)。" },
            { q: "She asked me where ___.", options: ["I was", "was I", "am I", "I am"], ans: 0, explain: "間接問句不倒裝 (S + V)。" },
            { q: "He told me ___ the door.", options: ["to open", "open", "opening", "opened"], ans: 0, explain: "Tell + O + to V。" },
            { q: "I wonder ___ he will come.", options: ["if", "that", "what", "which"], ans: 0, explain: "Wonder if (想知道是否)。" },
            { q: "He said he ___ finish it.", options: ["would", "will", "can", "may"], ans: 0, explain: "過去式引述句，未來式 will 轉 would。" },
            { q: "She asked if I ___ seen the movie.", options: ["had", "have", "has", "did"], ans: 0, explain: "問的時候已經看過，用過去完成式 (had p.p.)。" },
            { q: "The teacher said the earth ___ round.", options: ["is", "was", "were", "be"], ans: 0, explain: "真理 (地球是圓的) 不需退時態。" },
            { q: "He ordered the soldiers ___.", options: ["to fire", "fire", "firing", "fired"], ans: 0, explain: "Order + O + to V。" },
            { q: "She asked me what I ___ doing.", options: ["was", "am", "is", "are"], ans: 0, explain: "時態後退 (am/is -> was)。" },
            { q: "He advised me ___ smoke.", options: ["not to", "to not", "don't", "no"], ans: 0, explain: "Advise + O + not to V。" },
            { q: "He said he ___ there before.", options: ["had been", "has been", "was", "is"], ans: 0, explain: "過去的經驗，時態後退變過去完成式 (Had been)。" },
            { q: "They asked ___ I could help.", options: ["whether", "that", "what", "which"], ans: 0, explain: "Whether (是否)。" },
            { q: "He exclaimed that it ___ beautiful.", options: ["was", "is", "were", "be"], ans: 0, explain: "感嘆句轉述，通常時態一致 (was)。" },
            { q: "He promised he ___ come.", options: ["would", "will", "can", "may"], ans: 0, explain: "Promise that he would..." },
            { q: "Did she say when she ___?", options: ["would arrive", "will arrive", "arrives", "arrived"], ans: 0, explain: "時態後退，Will -> Would。" }
        ]
    },
    {
        id: 13,
        title: "虛主詞與強調句 Expletives & Cleft",
        tags: ["It Patterns", "Cleft Sentences"],
        concept: "<strong>虛主詞</strong> (It is adj to V)、<strong>強調句</strong> (It is...that)、存在句 (There is)。",
        questions: [
            { q: "It is important ___ learn English.", options: ["to", "for", "that", "of"], ans: 0, explain: "虛主詞句型 (It is adj to V)。" },
            { q: "It was John ___ broke the window.", options: ["who", "which", "what", "whose"], ans: 0, explain: "分裂句強調人 (It was... who/that...)。" },
            { q: "There ___ a book on the desk.", options: ["is", "are", "have", "has"], ans: 0, explain: "There is + 單數名詞。" },
            { q: "It is kind ___ you to help.", options: ["of", "for", "to", "with"], ans: 0, explain: "稱讚人的人格特質形容詞 (kind/nice/polite) 用 of。" },
            { q: "It was in Taipei ___ we met.", options: ["that", "where", "which", "what"], ans: 0, explain: "分裂句強調地點，用 that。" },
            { q: "I found ___ difficult to do.", options: ["it", "that", "this", "one"], ans: 0, explain: "虛受詞 it，代替後面的 to do。" },
            { q: "___ is no use crying.", options: ["It", "That", "This", "There"], ans: 0, explain: "It is no use V-ing (做...是沒用的)。" },
            { q: "It ___ without saying that...", options: ["goes", "go", "went", "going"], ans: 0, explain: "It goes without saying (不用說/顯然)。" },
            { q: "It seems ___ he is rich.", options: ["that", "what", "if", "so"], ans: 0, explain: "It seems that... (看起來似乎)。" },
            { q: "It occurred to me ___ I forgot it.", options: ["that", "what", "if", "so"], ans: 0, explain: "It occurred to me that (我突然想到)。" },
            { q: "I make ___ a rule to run.", options: ["it", "that", "this", "one"], ans: 0, explain: "Make it a rule to V (養成...的習慣)。" },
            { q: "It takes time ___ finish.", options: ["to", "for", "in", "on"], ans: 0, explain: "It takes time to V。" },
            { q: "We take ___ for granted that...", options: ["it", "that", "this", "one"], ans: 0, explain: "Take it for granted (視為理所當然)。" },
            { q: "There ___ to be a mistake.", options: ["seems", "seem", "look", "looks"], ans: 0, explain: "There seems to be... (似乎有)。" },
            { q: "It is time you ___ to bed.", options: ["went", "go", "have gone", "will go"], ans: 0, explain: "It is time + S + 過去式 (該是...的時候了)。" }
        ]
    },
    {
        id: 14,
        title: "文意推論 Grammar in Reading",
        tags: ["Context", "Logic", "Cloze"],
        concept: "<strong>高中必考</strong>：代名詞指代、連接詞功能、子句邏輯推論、克漏字。",
        questions: [
            { q: "Technology helps us. ___, it brings problems.", options: ["However", "Therefore", "Moreover", "So"], ans: 0, explain: "前後語氣轉折 (正面 vs 負面)，用 However。" },
            { q: "Tom is smart. ___, he is lazy.", options: ["On the other hand", "Therefore", "In addition", "So"], ans: 0, explain: "轉折語氣 (聰明但懶惰)。" },
            { q: "The population of A is larger than ___ of B.", options: ["that", "this", "it", "those"], ans: 0, explain: "用 That 代替前面提過的單數名詞 (population)。" },
            { q: "Some like tea; ___ like coffee.", options: ["others", "other", "another", "the other"], ans: 0, explain: "Some... others... (有些人...另有些人...)。" },
            { q: "He failed, ___ was unexpected.", options: ["which", "what", "that", "it"], ans: 0, explain: "Which 代替前面整件事 (他失敗了)。" },
            { q: "I have no idea ___ to do.", options: ["what", "how", "which", "where"], ans: 0, explain: "What to do (該做什麼)。" },
            { q: "Not only he but also I ___ wrong.", options: ["am", "is", "are", "be"], ans: 0, explain: "Not only...but also 連接主詞時，動詞依靠近的主詞 (I) 決定，故用 am。" },
            { q: "One is red; ___ is blue.", options: ["the other", "another", "other", "others"], ans: 0, explain: "兩者中一個...另一個 (One... the other)。" },
            { q: "For example, ___.", options: ["A", "B", "C", "D"], ans: 0, explain: "舉例連接詞。" },
            { q: "In addition, ___.", options: ["Moreover", "However", "But", "Yet"], ans: 0, explain: "In addition = Moreover (此外)。" },
            { q: "As a result, ___.", options: ["Therefore", "However", "But", "Or"], ans: 0, explain: "As a result = Therefore (因此)。" },
            { q: "He died ___ cancer.", options: ["of", "from", "by", "with"], ans: 0, explain: "Die of + 疾病。" },
            { q: "Similar ___ that.", options: ["to", "as", "with", "of"], ans: 0, explain: "Similar to (與...相似)。" },
            { q: "Different ___ that.", options: ["from", "to", "than", "with"], ans: 0, explain: "Different from (與...不同)。" },
            { q: "Keep in ___ that...", options: ["mind", "head", "heart", "brain"], ans: 0, explain: "Keep in mind (記住)。" }
        ]
    }
];

// --- Core Logic ---
let currentUnit = null;
let currentQuestions = [];
let currentQIndex = 0;
let score = 0;
let correctCount = 0;

const menuView = document.getElementById('menu-view');
const gameInterface = document.getElementById('game-interface');
const resultView = document.getElementById('result-view');
const header = document.getElementById('main-header');

function init() {
    syllabus.forEach(item => {
        const card = document.createElement('div');
        card.className = 'topic-card';
        card.onclick = () => loadUnit(item.id);
        
        let tagsHtml = item.tags.map(t => `<span class="tag">${t}</span>`).join('');

        card.innerHTML = `
            <div class="card-header">
                <span class="topic-num">UNIT ${item.id.toString().padStart(2, '0')}</span>
            </div>
            <div class="topic-title">${item.title}</div>
            <div class="topic-tags">${tagsHtml}</div>
        `;
        menuView.appendChild(card);
    });
}

function loadUnit(id) {
    const unitData = syllabus.find(u => u.id === id);
    currentUnit = unitData;
    
    // UPDATED: Randomly select 10 questions from the pool
    currentQuestions = [...unitData.questions].sort(() => 0.5 - Math.random()).slice(0, 10);

    currentQIndex = 0;
    score = 0;
    correctCount = 0;

    menuView.style.display = 'none';
    header.style.display = 'none';
    resultView.style.display = 'none';
    gameInterface.style.display = 'block';

    document.getElementById('level-indicator').innerText = `UNIT ${id.toString().padStart(2, '0')} : ${unitData.title}`;
    document.getElementById('concept-area').innerHTML = `
        <div class="concept-title">⚡ Key Concepts</div>
        <div class="concept-content">${unitData.concept}</div>
    `;

    renderQuestion();
}

function renderQuestion() {
    const qData = currentQuestions[currentQIndex];
    
    document.getElementById('next-btn').style.display = 'none';
    document.getElementById('explanation-area').style.display = 'none';
    
    const progress = ((currentQIndex) / currentQuestions.length) * 100;
    document.getElementById('progress-fill').style.width = `${progress}%`;

    document.getElementById('question-text').innerText = `Q${currentQIndex + 1}. ${qData.q}`;
    
    const optsDiv = document.getElementById('options-area');
    optsDiv.innerHTML = '';

    qData.options.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.className = 'opt-btn';
        btn.innerText = opt;
        btn.onclick = () => checkAnswer(idx, btn);
        optsDiv.appendChild(btn);
    });
}

function checkAnswer(selectedIdx, btnElement) {
    const qData = currentQuestions[currentQIndex];
    const allBtns = document.querySelectorAll('.opt-btn');
    allBtns.forEach(b => b.disabled = true);

    const isCorrect = selectedIdx === qData.ans;
    
    if (isCorrect) {
        btnElement.classList.add('correct');
        score += 100 / currentQuestions.length;
        correctCount++;
    } else {
        btnElement.classList.add('wrong');
        allBtns[qData.ans].classList.add('correct');
    }

    const explainDiv = document.getElementById('explanation-area');
    explainDiv.innerHTML = `<strong>${isCorrect ? 'Correct!' : 'Incorrect.'}</strong><br>${qData.explain}`;
    explainDiv.style.display = 'block';
    explainDiv.style.borderColor = isCorrect ? 'var(--success)' : 'var(--error)';

    document.getElementById('next-btn').style.display = 'block';
    document.getElementById('progress-fill').style.width = `${((currentQIndex + 1) / currentQuestions.length) * 100}%`;
}

function nextQuestion() {
    if (currentQIndex < currentQuestions.length - 1) {
        currentQIndex++;
        renderQuestion();
    } else {
        showResult();
    }
}

function showResult() {
    gameInterface.style.display = 'none';
    resultView.style.display = 'block';
    
    const finalScore = Math.round(score);
    const scoreEl = document.getElementById('final-score');
    const msgEl = document.getElementById('result-msg');
    
    scoreEl.innerText = finalScore;
    
    if (finalScore === 100) {
        scoreEl.style.borderColor = "var(--success)";
        msgEl.innerText = "Perfect! 🎓";
    } else if (finalScore >= 60) {
        scoreEl.style.borderColor = "var(--primary)";
        msgEl.innerText = "Good job! 👍";
    } else {
        scoreEl.style.borderColor = "var(--error)";
        msgEl.innerText = "Keep practicing! 💪";
    }
}

function showMenu() {
    gameInterface.style.display = 'none';
    resultView.style.display = 'none';
    menuView.style.display = 'grid';
    header.style.display = 'block';
}

init();
</script>

</body>
</html>
